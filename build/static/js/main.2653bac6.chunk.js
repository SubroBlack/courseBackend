(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},19:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),o=n.n(r),u=(n(19),n(2)),l=function(e){var t=e.id,n=e.deletePerson;return c.a.createElement("button",{onClick:n(t)},"Delete")},i=function(e){return c.a.createElement("p",null,e.name," ",e.number)},m=function(e){return e.persons.map((function(t){return c.a.createElement("div",{key:t.id},c.a.createElement(i,{name:t.name,number:t.number}),c.a.createElement(l,{deletePerson:e.deletePerson,id:t.id}))}))},f=function(e){var t=e.searchTerm,n=e.searchResult,a=e.changeSearch,r=e.search;return c.a.createElement("div",null,"filter shown with:"," ",c.a.createElement("input",{type:"text",value:t,onChange:a,onKeyUp:r}),c.a.createElement(m,{persons:n}))},s=n(3),h=n.n(s),d="/api/persons",b=function(){return h.a.get(d).then((function(e){return e.data}))},E=function(e){return h.a.post(d,e).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},v=function(e,t){return h.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},O=(n(37),function(e){var t=e.notification;return null===t?null:c.a.createElement("div",{className:"notification"},t)}),g=function(e){var t=e.error;return null===t?null:c.a.createElement("div",{className:"error"},t)},j=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),i=l[0],s=l[1],h=Object(a.useState)(""),d=Object(u.a)(h,2),j=d[0],w=d[1],k=Object(a.useState)(""),S=Object(u.a)(k,2),C=S[0],y=S[1],P=Object(a.useState)([]),R=Object(u.a)(P,2),T=R[0],D=R[1],N=Object(a.useState)(null),x=Object(u.a)(N,2),J=x[0],L=x[1],A=Object(a.useState)(null),B=Object(u.a)(A,2),F=B[0],I=B[1];Object(a.useEffect)((function(){b().then((function(e){r(e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(O,{notification:J}),c.a.createElement(g,{error:F}),c.a.createElement(f,{searchTerm:C,searchResult:T,changeSearch:function(e){y(e.target.value)},search:function(e){var t=n.filter((function(e){return C.toLowerCase()===e.name.toLowerCase()}));t.length>0?D(t):D([])}}),c.a.createElement("h2",null,"add a new"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===i})),a={name:i,number:j};t.length>0?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&v(t[0].id,a).then((function(e){L("Changed the number of ".concat(e.name," in the phonebook.")),setTimeout((function(){L(null)}),5e3),r(n.filter((function(e){return e.name!==i})).concat(e))})).catch((function(e){I("Could not edit the contact: ".concat(e))})):E(a).then((function(e){L("Added ".concat(e.name," in the phonebook.")),setTimeout((function(){L(null)}),5e3),r(n.concat(e))})).catch((function(e){console.log("ERROR: ",e),I("Failed: ".concat(e.message))})),s(""),w("")}},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:i,onChange:function(e){s(e.target.value)}}),c.a.createElement("br",null),"number: ",c.a.createElement("input",{value:j,onChange:function(e){w(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))),c.a.createElement("h2",null,"Numbers"),c.a.createElement(m,{persons:n,deletePerson:function(e){return function(){window.confirm("Delete the contact?")&&(p(e).catch((function(e){I("Could not delete the contact: ".concat(e)),setTimeout((function(){I(null)}),5e3)})),r(n.filter((function(t){return t.id!==e}))))}}}))};o.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2653bac6.chunk.js.map